name: 'GitHub Actions Nobook Bot'

on:
  workflow_dispatch: #此命令在Actions的该工作流的右侧添加手动执行选项 Run workflows
  schedule:
    - cron: '*/10 * * * *'
jobs:
  nobook-emailbot:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: 'Set up Python'
      uses: actions/setup-python@v1
      with:
        python-version: 3.7
    - name: Run s.py
      run: python ./nobook/s.py
    - name: list
      run: ls
    - name: Upload to this repo
      run: |
        git config --global user.name "holyspark" # 改成Github账号用户名
        git config --global user.email "313304981@qq.com" # 改成GitHub账号的邮箱
        git add "users.txt" && echo "Git Added" # 参考: https://stackoverflow.com/questions/25083290/git-add-error-unknown-switch
        git commit -m 'upload s result' && echo "Git Committed"
        git push -u origin main && echo "Git Pushed Origin" # master改成存放的分支
    - name: Failure test
      if: failure()
      run: | 
        ls
        echo "Error on running!"
